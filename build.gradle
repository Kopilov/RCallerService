plugins {
    id 'java'
    id 'org.jetbrains.kotlin.jvm' version '1.9.23'
}
repositories {
    mavenCentral()
}

subprojects {
    group 'com.github.kopilov.rcallerservice'
    version '1.1.1'

    apply plugin: 'org.jetbrains.kotlin.jvm'
    apply plugin: 'java'
    apply plugin: 'signing'
    apply plugin: 'maven-publish'

    repositories {
        mavenCentral()
    }

    compileJava {
        sourceCompatibility = JavaVersion.VERSION_17
        targetCompatibility = JavaVersion.VERSION_17
    }

    compileKotlin {
        kotlinOptions.jvmTarget = JavaVersion.VERSION_17
    }
    compileTestKotlin {
        kotlinOptions.jvmTarget = JavaVersion.VERSION_17
    }

    java {
        withSourcesJar()
        withJavadocJar()
    }

    publishing {
        repositories {
            maven {
                name = "OSS_Nexus"
                credentials {
                    username = "Kopilov"
                    password = ""
                }
                allowInsecureProtocol = true
                url = uri("https://oss.sonatype.org/service/local/staging/deploy/maven2/")
            }
        }
    }
}
